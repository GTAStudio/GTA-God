{
  "log": {
    "level": "info",
    "timestamp": true
  },
  "dns": {
    "servers": [
      {
        "tag": "doh-tcp",
        "address": "https://1.1.1.1/dns-query",
        "detour": "direct"
      }
    ],
    "rules": [
      {
        "outbound": "any",
        "server": "doh-tcp"
      }
    ],
    "strategy": "ipv4_only"
  },
  "inbounds": [
    {
      "type": "naive",
      "tag": "naive-in",
      "listen": "127.0.0.1",
      "listen_port": {{NAIVE_PORT}},
      "tcp_multi_path": {{TCP_MULTI_PATH}},
      "users": [
        {
          "username": "{{NAIVE_USER}}",
          "password": "{{NAIVE_PASSWORD}}"
        }
      ],
      "tls": {
        "enabled": true,
        "server_name": "{{NAIVE_SNI}}",
        "min_version": "1.3",
        "kernel_tx": {{KERNEL_TX}},
        "certificate_path": "/data/caddy/certificates/{{ACME_CA_DIR}}/wildcard_.{{DOMAIN}}/wildcard_.{{DOMAIN}}.crt",
        "key_path": "/data/caddy/certificates/{{ACME_CA_DIR}}/wildcard_.{{DOMAIN}}/wildcard_.{{DOMAIN}}.key"
      }
    },
    {
      "type": "anytls",
      "tag": "anytls-in",
      "listen": "127.0.0.1",
      "listen_port": {{ANYTLS_PORT}},
      "tcp_multi_path": {{TCP_MULTI_PATH}},
      "users": [
        {
          "name": "{{ANYTLS_USER}}",
          "password": "{{ANYTLS_PASSWORD}}"
        }
      ],
      "padding_scheme": [
        "stop=8",
        "0=30-30",
        "1=100-400",
        "2=400-500,c,500-1000,c,500-1000,c,500-1000,c,500-1000",
        "3=9-9,500-1000",
        "4=500-1000",
        "5=500-1000",
        "6=500-1000",
        "7=500-1000"
      ],
      "tls": {
        "enabled": true,
        "server_name": "{{ANYTLS_SNI}}",
        "min_version": "1.3",
        "kernel_tx": {{KERNEL_TX}},
        "certificate_path": "/data/caddy/certificates/{{ACME_CA_DIR}}/wildcard_.{{DOMAIN}}/wildcard_.{{DOMAIN}}.crt",
        "key_path": "/data/caddy/certificates/{{ACME_CA_DIR}}/wildcard_.{{DOMAIN}}/wildcard_.{{DOMAIN}}.key"
      }
    },
    {
      "type": "anytls",
      "tag": "anyreality-in",
      "listen": "127.0.0.1",
      "listen_port": {{ANYREALITY_PORT}},
      "tcp_multi_path": {{TCP_MULTI_PATH}},
      "users": [
        {
          "name": "{{ANYREALITY_USER}}",
          "password": "{{ANYREALITY_PASSWORD}}"
        }
      ],
      "padding_scheme": [
        "stop=8",
        "0=30-30",
        "1=100-400",
        "2=400-500,c,500-1000,c,500-1000,c,500-1000,c,500-1000",
        "3=9-9,500-1000",
        "4=500-1000",
        "5=500-1000",
        "6=500-1000",
        "7=500-1000"
      ],
      "tls": {
        "enabled": true,
        "server_name": "{{ANYREALITY_SNI}}",
        "min_version": "1.3",
        "reality": {
          "enabled": true,
          "handshake": {
            "server": "{{ANYREALITY_TARGET}}",
            "server_port": 443
          },
          "private_key": "{{ANYREALITY_PRIVATE_KEY}}",
          "short_id": ["{{ANYREALITY_SHORT_ID}}"]
        }
      }
    }
  ],
  "outbounds": [
    {
      "type": "direct",
      "tag": "direct",
      "tcp_fast_open": true
    }
  ]
}
